(this["webpackJsonpiracing-rpm-viewer"]=this["webpackJsonpiracing-rpm-viewer"]||[]).push([[0],{108:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(25),c=a.n(s),r=a(9),l=(a(108),a(63)),o=a.n(l),u=a(201),d=a(206),b=a(207),j=a(209),p=a(210),f=a(198),x=a(211),h=a(212),m=a(203),O=a(29),_=a(204),v=a(199),P=a(205),R=a(88),M=a.n(R),y=a(98),g=a(89),S=a.n(g),w=a(2),B=["children","value","index"],C=function(e){var t=e.children,a=e.value,n=e.index,i=Object(y.a)(e,B);return Object(w.jsx)("div",{className:S.a.RPMTabPanel,"data-testid":"RPMTabPanel",children:Object(w.jsx)("div",Object(O.a)(Object(O.a)({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},i),{},{children:a===n&&Object(w.jsx)(_.a,{sx:{p:3},children:t})}))})},N=a(92),E=a(93),G=a.n(E),L=(a(153),a(154),a(197)),k=function(e){e/=10;var t=Object(L.a)({start:0,end:e});return"".concat(t.minutes,":").concat(String(t.seconds).padStart(2,"0"),".").concat(String(Math.round(e%1e3)).padEnd(4,"0"))},T=function(e){var t=e.data,a=Object(n.useState)([{field:"finish_position",type:"numericColumn",headerName:"#",width:30,pinned:"left",valueGetter:function(e){var t=e.data.finish_position+1;return 1===t&&(t="\ud83c\udfc6"),t}},{field:"name (class #)",pinned:"left",valueGetter:function(e){var t=e.data.finish_position_in_class+1;return 1===t&&(t="\ud83c\udfc6"),"".concat(e.data.name," (").concat(t,")")}},{field:"best_lap",type:"numericColumn",headerName:"Best lap",valueFormatter:function(e){return k(e.value)}},{field:"best_qual_lap_time",type:"numericColumn",headerName:"Qualy",valueFormatter:function(e){return k(e.value)}},{field:"average_lap",type:"numericColumn",headerName:"Avg lap",valueFormatter:function(e){return k(e.value)}},{field:"incidents",type:"numericColumn"},{headerName:"Positions gained",type:"numericColumn",valueGetter:function(e){return e.data.starting_position-e.data.finish_position}},{field:"laps_complete",type:"numericColumn",headerName:"Laps completed"},{field:"class",filter:!0}]),i=Object(r.a)(a,1)[0];return Object(w.jsx)("div",{className:G.a.RPMResultsGrid,children:Object(w.jsx)("div",{className:"ag-theme-alpine",style:{height:600,width:"100%"},children:Object(w.jsx)(N.AgGridReact,{rowData:t,columnDefs:i})})})},F=a(14),I=a(36),A=a.n(I),q=a(94),z=a.n(q),W={Gold:"#fff714",Silver:"#eeeeee",Bronze:"#ab7d00"},D=function(e){var t=e.data,a=e.lap_type,i=void 0===a?"best_lap":a,s=Object(n.useState)([]),c=Object(r.a)(s,2),l=c[0],o=c[1],u=Object(n.useState)({}),d=Object(r.a)(u,2),b=d[0],j=d[1];return Object(n.useEffect)((function(){if(!(t.length<1)){var e=Object(F.a)(t).sort((function(e,t){return e[i]<t[i]?-1:1})),a=[];e.forEach((function(e){null!==e[i]&&-1!==e[i]&&a.push({x:e.name,y:e[i],fillColor:W[e.class]})})),j(function(e){return{dataLabels:{formatter:k,style:{colors:["#333"]},offsetX:10},plotOptions:{bar:{horizontal:!0},grid:{show:!1,xaxis:{lines:{show:!1}},yaxis:{lines:{show:!1}}}},tooltip:{y:{formatter:k}},xaxis:{labels:{formatter:k},min:1e4*Math.floor(e[0][i]/1e4),max:1e4*Math.ceil(e.reduce((function(e,t){return e[i]>t[i]?e:t}))[i]/1e4),tickAmount:10},yaxis:{axisTicks:{show:!1}}}}(t)),o([{name:"Best lap",data:a,tooltip:{valueFormatter:k}}])}}),[t]),Object(w.jsx)("div",{className:z.a.RPMLapsBars,"data-testid":"RPMLapsBars",children:t.length>0?Object(w.jsx)(A.a,{options:b,series:l,type:"bar",width:"100%"}):Object(w.jsx)(w.Fragment,{})})},J=a(95),Q=a.n(J),K=function(e){var t=e.data,a=Object(n.useState)([]),i=Object(r.a)(a,2),s=i[0],c=i[1],l=Object(n.useState)({yaxis:{labels:{formatter:k},min:88e4,max:96e4,tickAmount:8}}),o=Object(r.a)(l,2),u=o[0],d=o[1];return Object(n.useEffect)((function(){if(!(t.length<1)){var e=Object(F.a)(t).sort((function(e,t){return e.finish_position<t.finish_position?-1:1})),a=[];e.forEach((function(e){null!==e.best_lap&&a.push({x:"".concat(e.finish_position+1,". ").concat(e.name),y:[e.best_lap,e.quartile_1_lap,e.average_lap,e.quartile_3_lap,e.worst_lap]})})),c([{data:a}]),u.yaxis.min=1e4*Math.floor(t[0].best_lap/1e4),u.yaxis.max=u.yaxis.min+8e4,d(u)}}),[t]),Object(w.jsx)("div",{className:Q.a.RPMBoxPlot,children:s.length>0?Object(w.jsx)(A.a,{options:u,series:s,type:"boxPlot",width:"100%"}):Object(w.jsx)(w.Fragment,{})})},V=a(96),X=a.n(V),Z=function(e){var t=e.data,a=Object(n.useState)([]),i=Object(r.a)(a,2),s=(i[0],i[1]),c=Object(n.useState)({}),l=Object(r.a)(c,2),o=(l[0],l[1],[{name:"Website Blog",type:"column",data:t.map((function(e){return e.incidents}))},{name:"Social Media",type:"line",data:t.map((function(e){return e.incidents_per_lap}))}]),u={stroke:{width:[0,4]},title:{text:"Traffic Sources"},dataLabels:{enabled:!0,enabledOnSeries:[1]},labels:t.map((function(e){return e.name})),xaxis:{},yaxis:[{title:{text:"Website Blog"}},{opposite:!0,title:{text:"Social Media"}}]};return Object(n.useEffect)((function(){if(!(t.length<1)){var e=Object(F.a)(t).sort((function(e,t){return e.incidents<t.incidents?-1:1})),a=[];e.forEach((function(e){a.push({x:e.name,y:e.incidents})}));var n=[];e.forEach((function(e){n.push({x:e.name,y:e.incidents_per_lap})})),s([{type:"column",data:a},{type:"line",data:n,fillColor:"#330000"}]),console.log([{type:"column",data:a}])}}),[t]),Object(w.jsx)("div",{className:X.a.RPMIncidents,"data-testid":"RPMIncidents",children:t.length>0?Object(w.jsx)(A.a,{options:u,series:o,type:"line",width:"100%"}):Object(w.jsx)(w.Fragment,{})})},H=function(e){var t=e.data,a=i.a.useState(0),n=Object(r.a)(a,2),s=n[0],c=n[1],l=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}};return Object(w.jsxs)("div",{className:M.a.RPMRace,"data-testid":"RPMRace",children:[Object(w.jsx)("h2",{children:t.track_name}),Object(w.jsxs)(_.a,{sx:{width:"100%",height:"100%"},children:[Object(w.jsx)(_.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(w.jsxs)(v.a,{value:s,onChange:function(e,t){c(t)},"aria-label":"Race results tabs",children:[Object(w.jsx)(P.a,Object(O.a)({label:"Results"},l(0))),Object(w.jsx)(P.a,Object(O.a)({label:"Qualy laps"},l(1))),Object(w.jsx)(P.a,Object(O.a)({label:"Race laps"},l(2))),Object(w.jsx)(P.a,Object(O.a)({label:"Lap times distribution"},l(3))),Object(w.jsx)(P.a,Object(O.a)({label:"Incidents"},l(4)))]})}),Object(w.jsx)(C,{value:s,index:0,children:Object(w.jsx)(T,{data:t.drivers_statistics})}),Object(w.jsx)(C,{value:s,index:1,children:Object(w.jsx)(D,{data:t.drivers_statistics,lap_type:"best_qual_lap_time"})}),Object(w.jsx)(C,{value:s,index:2,children:Object(w.jsx)(D,{data:t.drivers_statistics})}),Object(w.jsx)(C,{value:s,index:3,children:Object(w.jsx)(K,{data:t.drivers_statistics})}),Object(w.jsx)(C,{value:s,index:4,children:Object(w.jsx)(Z,{data:t.drivers_statistics})})]})]})},U=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(null),l=Object(r.a)(c,2),O=l[0],_=l[1],v=Object(n.useState)(null),P=Object(r.a)(v,2),R=P[0],M=P[1],y=i.a.useState(null),g=Object(r.a)(y,2),S=g[0],B=g[1],C=Boolean(S);Object(n.useEffect)((function(){o.a.get("races.json").then((function(e){return s(e.data)}))}),[]),Object(n.useEffect)((function(){O&&o.a.get("data_"+O+".json").then((function(e){return M(e.data)}))}),[O]);return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(d.a,{}),Object(w.jsx)(b.a,{position:"static",children:Object(w.jsxs)(j.a,{children:[Object(w.jsx)(p.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:function(e){B(e.currentTarget)},children:Object(w.jsx)(m.a,{children:"menu"})}),Object(w.jsx)(f.a,{id:"basic-menu",anchorEl:S,open:C,onClose:function(){B(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:function(){if(a){var e=[];return a.races.forEach((function(t){var a;e.push(Object(w.jsxs)(u.a,{onClick:(a=t.subsession_id,function(){B(null),_(a)}),children:[t.race_num," - ",t.name]}))})),e}}()}),Object(w.jsx)(x.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"RPM European GT3 Series - Season 3"})]})}),Object(w.jsx)(h.a,{sx:{height:"100%"},children:R?Object(w.jsx)(H,{data:R}):null})]})},Y=(a(157),document.getElementById("root"));c.a.render(Object(w.jsx)(i.a.StrictMode,{children:Object(w.jsx)(U,{})}),Y)},88:function(e,t,a){e.exports={RPMRace:"RPMRace_RPMRace__3nlLv"}},89:function(e,t,a){e.exports={RPMTabPanel:"RPMTabPanel_RPMTabPanel__1RPKo"}},93:function(e,t,a){e.exports={RPMResultsGrid:"RPMResultsGrid_RPMResultsGrid__317WZ"}},94:function(e,t,a){e.exports={RPMLapsBars:"RPMLapsBars_RPMLapsBars__2inxn"}},95:function(e,t,a){e.exports={RPMBoxPlot:"RPMBoxPlot_RPMBoxPlot__uN3Ca"}},96:function(e,t,a){e.exports={RPMIncidents:"RPMIncidents_RPMIncidents__4P6eV"}}},[[158,1,2]]]);
//# sourceMappingURL=main.4e368053.chunk.js.map